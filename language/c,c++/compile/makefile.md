# Makefile / Make

## basic

### 구성
```makefile
foo: foo.o bar.o
  gcc -o foo foo.o bar.o

foo.o: foo.c
  gcc -c foo.c

bar.o: bar.c
  gcc -c bar.c
```

* 기본적으로 아래와 같은 구성으로 이루어져있음
```makefile
목표: 필요한 구성 요소들
  명령
  명령
  명령
```
* 목표를 명시한 줄 아래에 명령들이 딸려오는데, 명령 줄들은 탭키로 띄워져 있어야 함(스페이스 안됨)
* `make 목표` 명령을 실행하면 아래의 순서로 명령들이 실행됨
  1. 해당 목표에 필요한 구성요소 목록을 확인해 모든 구성요소가 존재하는지 확인함
  2. 만약 없는 구성요소가 있거나 소스코드가 수정되어 있다면 해당 구성요소를 만들기 위한 목표를 찾아 실행함
  3. 모든 구성요소가 존재하면 해당 목표를 생성하기 위한 명령들을 실행함
    - 이 때 명령들은 각기 다른 쉘에서 실행되므로 각 명령들이 연관되어있다면 명령 마지막에 ;와 \를 붙여 한줄로 처리되도록 만들어주어야 함

* 목표에 필요한 구성요소가 없다면 무조건 명령들이 실행되고, 반대로 목표에 명령들이 없다면 필요한 구성요소들만 체크하고 끝난다.
```makefile
#...

all: foo

clean:
  rm -f foo, *.o
```

### 변수
```makefile
CC = gcc
foo.o: foo.c
  $(CC) -c ${CFLAGS} foo.c
```

* 